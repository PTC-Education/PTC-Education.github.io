<!DOCTYPE html>
<html lang="en"><head>
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-163665919-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-163665919-1');
  </script>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Spatial Toolbox and Kepware | Digital Transformation in Education</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Spatial Toolbox and Kepware" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Digital Transformation is a strategy being used by industry to solve problems with smart, connected technologies. PTC Education works to bring these industry ready technologies to researchers and teachers around the world." />
<meta property="og:description" content="Digital Transformation is a strategy being used by industry to solve problems with smart, connected technologies. PTC Education works to bring these industry ready technologies to researchers and teachers around the world." />
<link rel="canonical" href="http://localhost:4000/docs/integrations/dxguides/spatialtoolboxkepware" />
<meta property="og:url" content="http://localhost:4000/docs/integrations/dxguides/spatialtoolboxkepware" />
<meta property="og:site_name" content="Digital Transformation in Education" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Spatial Toolbox and Kepware" />
<script type="application/ld+json">
{"description":"Digital Transformation is a strategy being used by industry to solve problems with smart, connected technologies. PTC Education works to bring these industry ready technologies to researchers and teachers around the world.","url":"http://localhost:4000/docs/integrations/dxguides/spatialtoolboxkepware","headline":"Spatial Toolbox and Kepware","@type":"WebPage","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<meta property="og:image" content="https://ptc-education.github.io/resources/Adv-Tech-Map.jpg">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Digital Transformation in Education" /><script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>
</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><nav class="navbar is-dark" role="navigation" aria-label="main navigation">
      <div class="navbar-brand">
        <a class="navbar-item" href="https://www.ptc.com/en/education">
          <img class="navbar-icon" alt="Digital Transformation in Education" src="/resources/ptc_education_KO-gr_logo.png" height="28"/>
        </a>

        <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="navbarBasicExample">
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
      </div>

      <div id="navbarBasicExample" class="navbar-menu">
        <div class="navbar-start">
          
          
            
            
            
              
                <a class="navbar-item active" href="http://localhost:4000/">
                  DX in Education
                </a>
              
            
          
            
            
            
              <div class="navbar-item has-dropdown is-hoverable">
                <a href="http://localhost:4000/docs/tech" class="navbar-link">Technologies</a>
                <div class="navbar-dropdown">
                  
                    
                      <a class="navbar-item" href="http://localhost:4000/docs/tech">
                        Introduction
                      </a>

                      
                    
                  
                    
                      <a class="navbar-item" href="http://localhost:4000/docs/tech/design">
                        Design
                      </a>

                      
                    
                  
                    
                      <a class="navbar-item" href="http://localhost:4000/docs/tech/connectivity">
                        Connectivity
                      </a>

                      
                    
                  
                    
                      <a class="navbar-item" href="http://localhost:4000/docs/tech/thread">
                        Digital Thread
                      </a>

                      
                    
                  
                </div>
              </div>
            
          
            
            
            
              <div class="navbar-item has-dropdown is-hoverable">
                <a href="http://localhost:4000/docs/integrations" class="navbar-link">Integrations</a>
                <div class="navbar-dropdown">
                  
                    
                      <a class="navbar-item" href="http://localhost:4000/docs/integrations">
                        Introduction
                      </a>

                      
                    
                  
                    
                      <a class="navbar-item" href="http://localhost:4000/docs/integrations/dxguides">
                        DX Guides
                      </a>

                      
                    
                  
                    
                      <a class="navbar-item" href="http://localhost:4000/docs/integrations/apiplayground">
                        API Playground
                      </a>

                      
                    
                  
                </div>
              </div>
            
          
            
            
            
              <div class="navbar-item has-dropdown is-hoverable">
                <a href="http://localhost:4000/docs/thought-leadership" class="navbar-link">Thought Leadership</a>
                <div class="navbar-dropdown">
                  
                    
                      <a class="navbar-item" href="http://localhost:4000/docs/thought-leadership">
                        Introduction
                      </a>

                      
                    
                  
                    
                      <a class="navbar-item" href="http://localhost:4000/docs/thought-leadership/webinars">
                        Webinars
                      </a>

                      
                    
                  
                    
                      <a class="navbar-item" href="http://localhost:4000/docs/thought-leadership/research-teaching">
                        DX Research and Teaching
                      </a>

                      
                    
                  
                    
                      <a class="navbar-item" href="http://localhost:4000/docs/thought-leadership/publications">
                        Publications
                      </a>

                      
                    
                  
                </div>
              </div>
            
          
            
            
            
              
                <a class="navbar-item " href="http://localhost:4000/blog">
                  Blog
                </a>
              
            
          
            
            
            
              
                <a class="navbar-item " href="mailto:edutech@ptc.com">
                  Contact Us
                </a>
              
            
          
        </div>
      </div>
    </nav>

<!--
      <ul class="nav navbar-nav">
        
        
          
          
          
            <li class="active">
              <a href="http://localhost:4000/">DX in Education</a>
            </li>
          
        
          
          
          
            <li class="dropdown ">
              <a href="http://localhost:4000/docs/tech" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Technologies <span class="caret"></span></a>
              <ul class="dropdown-menu">
                
                  
                    <li>
                      <a href="http://localhost:4000/docs/tech">Introduction</a>
                    </li>
                  
                
                  
                    <li>
                      <a href="http://localhost:4000/docs/tech/design">Design</a>
                    </li>
                  
                
                  
                    <li>
                      <a href="http://localhost:4000/docs/tech/connectivity">Connectivity</a>
                    </li>
                  
                
                  
                    <li>
                      <a href="http://localhost:4000/docs/tech/thread">Digital Thread</a>
                    </li>
                  
                
              </ul>
            </li>
          
        
          
          
          
            <li class="dropdown active">
              <a href="http://localhost:4000/docs/integrations" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Integrations <span class="caret"></span></a>
              <ul class="dropdown-menu">
                
                  
                    <li>
                      <a href="http://localhost:4000/docs/integrations">Introduction</a>
                    </li>
                  
                
                  
                    <li>
                      <a href="http://localhost:4000/docs/integrations/dxguides">DX Guides</a>
                    </li>
                  
                
                  
                    <li>
                      <a href="http://localhost:4000/docs/integrations/apiplayground">API Playground</a>
                    </li>
                  
                
              </ul>
            </li>
          
        
          
          
          
            <li class="dropdown ">
              <a href="http://localhost:4000/docs/thought-leadership" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Thought Leadership <span class="caret"></span></a>
              <ul class="dropdown-menu">
                
                  
                    <li>
                      <a href="http://localhost:4000/docs/thought-leadership">Introduction</a>
                    </li>
                  
                
                  
                    <li>
                      <a href="http://localhost:4000/docs/thought-leadership/webinars">Webinars</a>
                    </li>
                  
                
                  
                    <li>
                      <a href="http://localhost:4000/docs/thought-leadership/research-teaching">DX Research and Teaching</a>
                    </li>
                  
                
                  
                    <li>
                      <a href="http://localhost:4000/docs/thought-leadership/publications">Publications</a>
                    </li>
                  
                
              </ul>
            </li>
          
        
          
          
          
            <li class="">
              <a href="http://localhost:4000/blog">Blog</a>
            </li>
          
        
          
          
          
            <li class="">
              <a href="http://localhost:4000mailto:edutech@ptc.com">Contact Us</a>
            </li>
          
        
      </ul>
-->
    </nav>
  </div>
  <script src="/assets/bulma-dropdown.js"></script>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <div class="columns">
  <div class="column">
    <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
      <div class="post-content e-content" itemprop="articleBody">
        <h2 id="connect-allen-bradley-plcs-to-vuforia-spatial-toolbox-with-kepware">Connect Allen-Bradley PLCs to Vuforia Spatial Toolbox with Kepware</h2>

<h3 id="hardware-needed">Hardware Needed:</h3>
<ul>
  <li>An Allen Bradley PLC (This tutorial was written and tested with two Allen-Bradley PLCs, a <a href="https://literature.rockwellautomation.com/idc/groups/literature/documents/um/2080-um002_-en-e.pdf">Micro850</a> and a <a href="https://literature.rockwellautomation.com/idc/groups/literature/documents/um/5069-um002_-en-p.pdf">CompactLogix5480</a>.)</li>
  <li>An Ethernet Cable</li>
  <li>Windows Computer (This tutorial and testing utilized an Intel NUC)</li>
</ul>

<h2 id="set-up-the-plc">Set up the PLC</h2>

<h3 id="micro850">Micro850</h3>
<p>Install <a href="https://compatibility.rockwellautomation.com/Pages/MultiProductFindDownloads.aspx?crumb=112&amp;refSoft=1&amp;toggleState=&amp;versions=57681">Connected Components Workbench (CCW)</a>, following <a href="https://www.youtube.com/watch?v=BU7O8KXfdPA&amp;ab_channel=TimWilborne">these instructions</a> from 2:39-8min to configure the PLC with CCW.</p>

<h3 id="compactlogix5480">CompactLogix5480</h3>
<p>For the CompactLogix5480, install Rockwell Automation Studio 5000 Logix Designer. We used <a href="https://twcontrols.com/lessons/how-to-connect-to-an-allen-bradley-controllogix-plc-over-ethernet-with-studio-5000-and-rslinx">these lessons</a> to connect to and configure our CompactLogix5480.</p>

<h4 id="test-with-a-simple-program">Test with a simple program</h4>

<p>Once your device is connected anad you can create a program, make a simple “Hello World” that will activate some of outputs on the PLC. A possible demo could be to use the Timer (TON) within CCW to turn your outputs on and off repeatedly. Here’s an example:</p>
<ul>
  <li><a href="https://www.youtube.com/watch?v=CI7o78YogGw&amp;ab_channel=InsightsInAutomation">This video shows the process of using the TON with CCW</a>.</li>
  <li><a href="https://github.com/PTC-Academic/DX-Resources/blob/master/Curriculum_Resources/DX-Exercises/Resources/Traffic-Light-Demo-withWalk.pdf">This PDF shows the ladder logic</a> for a traffic light demo made in Studio 5000 Logix Designer.</li>
</ul>

<h2 id="set-up-networking">Set up Networking</h2>

<p>This project used the ethernet (wired) port to create a local network to communicate to the PLC, and leveraged the wireless network for outbound/internet communications.</p>
<ul>
  <li>For the wireless connection, a static or dynammic IP will work.</li>
  <li>For the wired connection, we gave the computer a static ethernet IP Address: 192.168.0.1; Subnet Mask: 255.255.255.0; Default Gateway and Primary DNS were set to match the gateway and DNS for the wireless connection.</li>
</ul>

<h3 id="set-the-micro850-ip-address">Set the Micro850 IP address</h3>
<p>Click on the <code class="language-plaintext highlighter-rouge">Micro850</code> tab in CCW and select <code class="language-plaintext highlighter-rouge">Ethernet</code> on the bottom right. Once selected, scroll down on the right side and select “Configure IP address and settings” underneath <strong>Internet Protocol (IP) Settings</strong>.</p>
<ul>
  <li>Adjust the IP to your settings. For us, we set the IP Address to 192.168.0.2, the Subnet Mask to 255.255.255.0, and the Gateway Address to 192.168.0.1</li>
</ul>

<h3 id="set-the-compactlogix5480-ip-address">Set the CompactLogix5480 IP address</h3>
<p>For the CompactLogix5480, we used RSLinx to set the Ethernet IP Address to 192.168.0.2, the Subnet Mask to 255.255.255.0, and the Gateway Address to 192.168.0.1 per the instructions in the CompactLogix5480 user manual.</p>

<p>**To verify that the PLC should is connected to your Windows Computer, <a href="https://en.wikipedia.org/wiki/Ping_(networking_utility)">ping</a> the IP address from the command prompt on the computer with ping 192.168.0.2, if the response is some number of ms, they are connected.</p>

<h2 id="connect-the-plc-to-kepware">Connect the PLC to Kepware</h2>

<ul>
  <li><a href="https://www.kepware.com/en-us/content-gates/ex-demo-download-content-gate/?product=d2239b8c-36f2-4d07-8fbd-e223d0e26bbf&amp;gate=8a5e8dd5-6edf-4d68-aa36-72f97b11e612">Download and install KEPServerEX</a> – this is a free trial, but is fully functional; KEPServerEX will run for 2 hours at a time, then it needs to be restarted. Note, this product is also called “ThingWorx Indsutrical Connectivity”.</li>
  <li><a href="https://java.com/en/download/manual.jsp">Download and install Java</a></li>
</ul>

<p>Open Kepware, right-click “Connectivity” and add a new Channel:</p>

<h2><img src="/docs/integrations/dxguides/Resources/VST-PLC-image001.png" alt="Adding a new Channel on Kepware" /></h2>

<h3 id="micro850-and-ccw">Micro850 and CCW</h3>
<p><a href="https://www.youtube.com/watch?v=KRFA9YutiUs&amp;ab_channel=LearnWithPro-Tutorial">This video</a> walks through the next few steps of the different settings to alter (watch until 9:50min).</p>
<ul>
  <li><strong>IMPORTANT:</strong> Notice at minute 5:35 how the video says to have the same address for the tag (variable) as in CCW. This address may look something like <code class="language-plaintext highlighter-rouge">_IO_EM_DO_01</code>. If the tag addresses for all your variables do not match the ones in CCW, the connection with Kepware will not work.</li>
</ul>

<p>To test the connection between your PLC and Kepware:</p>
<ul>
  <li>First, on CCW, connect you PLC and begin to run your “Hello World” program. This can be done by clicking “Disconnect” at the top. If your “Hello World” program does not run in a loop, just click “Disconnect” so that it says “Connected” but do not run the program yet.</li>
  <li>Next, on Kepware click the “Quick Client” button:</li>
</ul>

<h2 id="-1"><img src="/docs/integrations/dxguides/Resources/VST-PLC-image002.png" alt="Quick Client Button&quot;" /></h2>
<ul>
  <li>Once this is clicked, it should open a new window. Select <b>Chanel1.”name of your PLC”</b>, The quality should be labeled as “Good” and once your program on CCW runs (or if it is already running) you should see the value update.<br /><br /></li>
</ul>

<h2 id="-2"><img src="/docs/integrations/dxguides/Resources/VST-PLC-image003.png" alt="Quick Client Panel" /></h2>

<h3 id="compactlogix5480-and-studio-5000">CompactLogix5480 and Studio 5000</h3>
<p><a href="https://www.kepware.com/getattachment/7ce5cce5-7186-4159-88f0-413980a956ae/ab-controllogix-ethernet-easy-guide.pdf">This Kepware guide</a> walks through the same steps for Studio 5000.</p>

<h2 id="connecting-kepware-to-vuforia-spatial-toolbox">Connecting Kepware to Vuforia Spatial Toolbox</h2>

<h3 id="download-the-spatial-toolbox">Download the Spatial Toolbox</h3>

<p>Download and install the spatial toolbox through the <a href="https://spatialtoolbox.vuforia.com/docs/use/connect-to-the-physical-world/install-on-windows">PTC Reality Team’s Website</a></p>
<ul>
  <li>After installation, start the toolbox edge server</li>
</ul>

<h3 id="connect-kepware-and-spatial-toolbox">Connect Kepware and Spatial Toolbox</h3>

<p>The Spatial Toolbox uses OPCUA to communicate with Kepware. Once the server is running, follow the steps below to set up Kepware and Spatial Toolbox to work together.</p>

<h4 id="configure-opc-ua-in-kepware">Configure OPC UA in Kepware</h4>
<ul>
  <li>To Add an OPC server in the Kepware configuration, open OPC UA Configuration from the Kepware config tray icon:</li>
</ul>

<h2 id="-3"><img src="/docs/integrations/dxguides/Resources/Kepware-VST-001.png" alt="Kepware config tray icon" /></h2>

<ul>
  <li>Choose the correct adapter (probably wifi, and set a port, or use default. This IP and port will be used in the in the VST edge server Kepware addon configuration.</li>
</ul>

<h2 id="-4"><img src="/docs/integrations/dxguides/Resources/Kepware-VST-002.png" alt="Kepware OPC UA Endpoint Definition" /></h2>
<ul>
  <li>
    <p>Close window with OK</p>
  </li>
  <li>
    <p>Create an OPCUA user; open Settings from the Kepware config tray icon:</p>
  </li>
</ul>

<h2 id="-5"><img src="/docs/integrations/dxguides/Resources/Kepware-VST-003.png" alt="Kepware config tray icon" /></h2>

<ul>
  <li>Create an Admin User with the Kepware (ThingWorx Industrial Connectivity) Settings Control Panel:</li>
</ul>

<h2 id="-6"><img src="/docs/integrations/dxguides/Resources/Kepware-VST-004.png" alt="Kepware (ThingWorx Industrial Connectivity) Settings Control Panel" /></h2>
<ul>
  <li>Save and close</li>
</ul>

<h4 id="configure-vuforia-spatial-toolbox-server-settings">Configure Vuforia Spatial Toolbox Server settings</h4>
<ul>
  <li>Open a browser and navigate to ‘localhost:8080’</li>
  <li>Click on <em>Manage Hardware Interfaces</em> and click the <em>Settings</em> icon next to Kepware</li>
  <li>Enter the <em>IP:Port</em>, <em>username</em> and <em>password</em> in the VST edge server Kepware addon configuration:
    <h2 id="-7"><img src="/docs/integrations/dxguides/Resources/Kepware-VST-005.png" alt="Spatial Toolbox Hardware Interfaces Kepware Configuration:" /></h2>
  </li>
</ul>

<h4 id="restart-vst-edge-server">Restart VST Edge server</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- In the terminal where you started it, click 'CTRL-C' to stop it, and then enter 'node server' to start it again - Re-open the OPC UA Configuration from the Kepware config tray icon to Trust the rejected certificate:
</code></pre></div></div>

<h2 id="-8"><img src="/docs/integrations/dxguides/Resources/Kepware-VST-006.png" alt="OPC UA Configuration Manager, Trusted Clients Tab:" /></h2>
<ul>
  <li>Click Close and restart VST Edge Server again, and refresh the server web page</li>
</ul>

<h4 id="reinitialize-kepware">Reinitialize Kepware</h4>
<ul>
  <li>In Kepware, click on the “Runtime” menu (next to “Help”) and select reinitialize.</li>
  <li>You should see feedback in the Kepware interface that</li>
</ul>

<h4 id="look-for-tags-in-vst-edge-server">Look for Tags in VST Edge server</h4>
<ul>
  <li>Click on <em>Manage Hardware Interfaces</em> and click the <em>Settings</em> icon next to Kepware</li>
  <li>If the connection is working, you should see any tags/varibles you created in your PLC</li>
  <li>Check the tags you want to use; now, if you return to <em>Object Configureation</em> and add a target to the <em>kepware….</em> object, you will have nodes available for each of the tags.</li>
</ul>

<h4 id="have-fun">Have fun!</h4>
<p>To start playing with the toolbox, please see <a href="https://www.youtube.com/watch?v=TBEV5K3dprA&amp;list=PLhL0fv9JyKMaWhaHmm21J6mgpp841zYYw&amp;index=2&amp;ab_channel=CEEOInnovations">this Youtube Playlist</a> to add image targets and how to use the Spatial Toolbox!</p>


      </div>

      <a class="u-url" href="/docs/integrations/dxguides/spatialtoolboxkepware" hidden></a>
    </article>
  </div>
  <div class="column is-narrow"><aside class="menu">
  
  
    <p class="menu-label">
      <a href="http://localhost:4000/">
        DX in Education
      </a>
    </p>
    
  
    <p class="menu-label">
      <a href="http://localhost:4000/docs/tech">
        Technologies
      </a>
    </p>
    
      <ul class="menu-list">
        
          
          
          <li>
            <a class="" href="http://localhost:4000/docs/tech">
              Introduction
            </a>

            

          </li>
        
          
          
          <li>
            <a class="" href="http://localhost:4000/docs/tech/design">
              Design
            </a>

            

          </li>
        
          
          
          <li>
            <a class="" href="http://localhost:4000/docs/tech/connectivity">
              Connectivity
            </a>

            

          </li>
        
          
          
          <li>
            <a class="" href="http://localhost:4000/docs/tech/thread">
              Digital Thread
            </a>

            

          </li>
        
      </ul>
    
  
    <p class="menu-label">
      <a href="http://localhost:4000/docs/integrations">
        Integrations
      </a>
    </p>
    
      <ul class="menu-list">
        
          
          
          <li>
            <a class="" href="http://localhost:4000/docs/integrations">
              Introduction
            </a>

            

          </li>
        
          
          
          <li>
            <a class="" href="http://localhost:4000/docs/integrations/dxguides">
              DX Guides
            </a>

            

          </li>
        
          
          
          <li>
            <a class="" href="http://localhost:4000/docs/integrations/apiplayground">
              API Playground
            </a>

            

          </li>
        
      </ul>
    
  
    <p class="menu-label">
      <a href="http://localhost:4000/docs/thought-leadership">
        Thought Leadership
      </a>
    </p>
    
      <ul class="menu-list">
        
          
          
          <li>
            <a class="" href="http://localhost:4000/docs/thought-leadership">
              Introduction
            </a>

            

          </li>
        
          
          
          <li>
            <a class="" href="http://localhost:4000/docs/thought-leadership/webinars">
              Webinars
            </a>

            

          </li>
        
          
          
          <li>
            <a class="" href="http://localhost:4000/docs/thought-leadership/research-teaching">
              DX Research and Teaching
            </a>

            

          </li>
        
          
          
          <li>
            <a class="" href="http://localhost:4000/docs/thought-leadership/publications">
              Publications
            </a>

            

          </li>
        
      </ul>
    
  
    <p class="menu-label">
      <a href="http://localhost:4000/blog">
        Blog
      </a>
    </p>
    
  
</aside>
</div>
</div>

      </div>
    </main><footer class="footer">
  <div class="columns">
    <div class="column is-narrow">
      <a href="mailto:EduTech@ptc.com">Contact</a>
    </div>
    <div class="column is-narrow">
      <a href="https://www.ptc.com/en/documents/policies">Legal</a>
    </div>
    <div class="column is-narrow">
      <a href="https://www.ptc.com/en/documents/policies/privacy">Privacy Policy</a>
    </div>
    <div class="column is-narrow">
      <a href="http://www.ptc.com/careers">Careers</a>
    </div>
  </div>
  <div class="footer-disclaimer">
    <p>©2021 PTC Inc. All rights reserved. Nothing in these materials is an offer to sell any of the components or devices referenced herein. PTC, Vuforia, Creo, Onshape, ThingWorx, Kepware, Windchill, and Mathcad are trademarks or registered trademarks of PTC Inc. in the United States and other countries. Other products and brand names referenced may be trademarks or registered trademarks of their respective owners.</p>
  </div>
</footer>
</body>

</html>
